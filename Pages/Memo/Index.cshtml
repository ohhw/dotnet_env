@page
@model App.Pages.Memo.IndexModel
@{
    ViewData["Title"] = "ë©”ëª¨ì¥";
}

<div style="max-width: 1200px; margin: 0 auto; padding: 20px;">
    <!-- í˜ì´ì§€ í—¤ë” -->
    <div style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 30px; border-radius: 15px; margin-bottom: 30px; text-align: center; box-shadow: 0 8px 32px rgba(0,0,0,0.1);">
        <h1 style="margin: 0; font-size: 2.5em;">ğŸ“ ë©”ëª¨ì¥</h1>
        <p style="margin: 10px 0 0 0; font-size: 1.1em; opacity: 0.9;">ë‚˜ë§Œì˜ ë©”ëª¨ë¥¼ ê´€ë¦¬í•˜ì„¸ìš”</p>
    </div>

    <!-- ê¸°ëŠ¥ ë²„íŠ¼ë“¤ -->
    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px; margin-bottom: 30px;">
        <button onclick="window.location.href='/Memo/Add'" 
                style="background: #28a745; color: white; padding: 15px 20px; border: none; border-radius: 10px; cursor: pointer; font-size: 16px; font-weight: bold; transition: all 0.3s ease; box-shadow: 0 4px 15px rgba(40,167,69,0.3);"
                onmouseover="this.style.transform='translateY(-2px)'" onmouseout="this.style.transform='translateY(0)'">
            â• ìƒˆ ë©”ëª¨ ì¶”ê°€
        </button>
        
        <button onclick="window.location.href='/Memo/View'" 
                style="background: #007bff; color: white; padding: 15px 20px; border: none; border-radius: 10px; cursor: pointer; font-size: 16px; font-weight: bold; transition: all 0.3s ease; box-shadow: 0 4px 15px rgba(0,123,255,0.3);"
                onmouseover="this.style.transform='translateY(-2px)'" onmouseout="this.style.transform='translateY(0)'">
            ğŸ‘€ ë©”ëª¨ ë³´ê¸°
        </button>
        
        <button onclick="window.location.href='/Memo/Export'" 
                style="background: #ffc107; color: #212529; padding: 15px 20px; border: none; border-radius: 10px; cursor: pointer; font-size: 16px; font-weight: bold; transition: all 0.3s ease; box-shadow: 0 4px 15px rgba(255,193,7,0.3);"
                onmouseover="this.style.transform='translateY(-2px)'" onmouseout="this.style.transform='translateY(0)'">
            ğŸ“¤ ë©”ëª¨ ë‚´ë³´ë‚´ê¸°
        </button>
        
        <button onclick="window.location.href='/'" 
                style="background: #6c757d; color: white; padding: 15px 20px; border: none; border-radius: 10px; cursor: pointer; font-size: 16px; font-weight: bold; transition: all 0.3s ease; box-shadow: 0 4px 15px rgba(108,117,125,0.3);"
                onmouseover="this.style.transform='translateY(-2px)'" onmouseout="this.style.transform='translateY(0)'">
            ğŸ  í™ˆìœ¼ë¡œ
        </button>
    </div>

    <!-- ë¹ ë¥¸ ë©”ëª¨ ì¶”ê°€ -->
    <div style="background: white; padding: 25px; border-radius: 15px; box-shadow: 0 4px 20px rgba(0,0,0,0.1); margin-bottom: 30px;">
        <h3 style="margin: 0 0 20px 0; color: #333; font-size: 1.3em;">âœï¸ ë¹ ë¥¸ ë©”ëª¨ ì¶”ê°€</h3>
        
        <form method="post" asp-page-handler="AddMemo">
            @Html.AntiForgeryToken()
            <div style="margin-bottom: 15px;">
                <input type="text" name="title" placeholder="ë©”ëª¨ ì œëª©ì„ ì…ë ¥í•˜ì„¸ìš”" required 
                       style="width: 100%; padding: 12px 16px; border: 2px solid #e9ecef; border-radius: 8px; font-size: 16px; box-sizing: border-box;">
            </div>
            
            <div style="margin-bottom: 20px;">
                <textarea name="content" placeholder="ë©”ëª¨ ë‚´ìš©ì„ ì…ë ¥í•˜ì„¸ìš”" required 
                          style="width: 100%; height: 120px; padding: 12px 16px; border: 2px solid #e9ecef; border-radius: 8px; font-size: 14px; resize: vertical; font-family: Arial, sans-serif; box-sizing: border-box;"></textarea>
            </div>
            
            <div style="text-align: center;">
                <button type="submit" 
                        style="background: #007bff; color: white; padding: 12px 30px; border: none; border-radius: 8px; cursor: pointer; font-size: 16px; font-weight: bold; transition: all 0.3s ease;"
                        onmouseover="this.style.background='#0056b3'" onmouseout="this.style.background='#007bff'">
                    ğŸ’¾ ë©”ëª¨ ì €ì¥í•˜ê¸°
                </button>
            </div>
        </form>
    </div>

    <!-- ìµœê·¼ ë©”ëª¨ ë¯¸ë¦¬ë³´ê¸° -->
    <div style="background: white; padding: 25px; border-radius: 15px; box-shadow: 0 4px 20px rgba(0,0,0,0.1);">
        <h3 style="margin: 0 0 20px 0; color: #333; font-size: 1.3em;">ğŸ“‹ ìµœê·¼ ë©”ëª¨ ë¯¸ë¦¬ë³´ê¸°</h3>
        
        @if (Model.RecentMemos != null && Model.RecentMemos.Any())
        {
            <div style="display: grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); gap: 15px;">
                @foreach (var memo in Model.RecentMemos.Take(6))
                {
                    <div style="background: #f8f9fa; padding: 15px; border-radius: 10px; border-left: 4px solid #007bff; transition: all 0.3s ease; cursor: pointer;"
                         onclick="window.location.href='/Memo/View?id=@memo.Id'"
                         onmouseover="this.style.transform='translateY(-2px)'; this.style.boxShadow='0 4px 15px rgba(0,0,0,0.1)'"
                         onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='none'">
                        <h5 style="margin: 0 0 8px 0; color: #333; font-size: 16px;">@memo.Title</h5>
                        <p style="margin: 0 0 10px 0; color: #666; font-size: 14px; line-height: 1.4;">
                            @(memo.Content.Length > 100 ? memo.Content.Substring(0, 100) + "..." : memo.Content)
                        </p>
                        <small style="color: #999;">@memo.CreatedAt.ToString("yyyy-MM-dd HH:mm")</small>
                    </div>
                }
            </div>
            
            <div style="text-align: center; margin-top: 20px;">
                <a href="/Memo/View" style="background: #007bff; color: white; padding: 10px 20px; text-decoration: none; border-radius: 8px; font-size: 14px; transition: all 0.3s ease;"
                   onmouseover="this.style.background='#0056b3'" onmouseout="this.style.background='#007bff'">
                    ğŸ“„ ëª¨ë“  ë©”ëª¨ ë³´ê¸°
                </a>
            </div>
        }
        else
        {
            <div style="text-align: center; padding: 40px; color: #666;">
                <h4 style="margin: 0 0 10px 0;">ì•„ì§ ë©”ëª¨ê°€ ì—†ìŠµë‹ˆë‹¤</h4>
                <p style="margin: 0;">ì²« ë²ˆì§¸ ë©”ëª¨ë¥¼ ì‘ì„±í•´ë³´ì„¸ìš”!</p>
            </div>
        }
    </div>
</div>

<!-- ë©”ëª¨ ê´€ë ¨ ê¸°ëŠ¥ ìŠ¤í¬ë¦½íŠ¸ -->
<script>
    // ì—”í„°í‚¤ë¡œ ë¹ ë¥¸ ê²€ìƒ‰
    document.addEventListener('DOMContentLoaded', function() {
        const titleInput = document.querySelector('input[name="title"]');
        const contentTextarea = document.querySelector('textarea[name="content"]');
        
        if (titleInput) {
            titleInput.addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    e.preventDefault();
                    if (contentTextarea) contentTextarea.focus();
                }
            });
        }
        
        if (contentTextarea) {
            contentTextarea.addEventListener('keydown', function(e) {
                if (e.key === 'Enter' && e.ctrlKey) {
                    e.preventDefault();
                    this.closest('form').submit();
                }
            });
        }
    });
    
    // ë©”ëª¨ ì¹´ë“œ í˜¸ë²„ íš¨ê³¼
    function showMemoPreview(id) {
        // ë©”ëª¨ ë¯¸ë¦¬ë³´ê¸° ê¸°ëŠ¥ (ì¶”í›„ êµ¬í˜„ ê°€ëŠ¥)
        console.log('ë©”ëª¨ ë¯¸ë¦¬ë³´ê¸°:', id);
    }
</script>
